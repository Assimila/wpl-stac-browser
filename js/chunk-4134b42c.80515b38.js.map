{"version":3,"sources":["webpack:///./src/components/Catalog.vue?4a33","webpack:///src/components/Catalog.vue","webpack:///./src/components/Catalog.vue?dc9f","webpack:///./src/components/Catalog.vue","webpack:///./src/components/Catalog.vue?4ac9","webpack:///./node_modules/remove-markdown/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","modifiers","staticClass","class","queued","data","attrs","isList","showThumbnail","thumbnail","thumbnailVisible","href","title","crossOriginMedia","_e","catalog","description","_v","_s","_f","temporalExtent","staticRenderFns","components","StacLink","props","type","required","default","filters","stripCommonmark","text","shortTemporalExtent","formatTemporalExtent","computed","mapState","mapGetters","cardViewMode","getStac","thumbnails","length","extent","temporal","interval","methods","load","visible","$store","commit","component","module","exports","md","options","listUnicodeChar","hasOwnProperty","stripListLeaders","gfm","useImgAltText","output","replace","e","console","error"],"mappings":"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","file":"js/chunk-4134b42c.80515b38.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',{directives:[{name:\"b-visible\",rawName:\"v-b-visible.200\",value:(_vm.load),expression:\"load\",modifiers:{\"200\":true}}],staticClass:\"catalog-card\",class:{queued: !this.data},attrs:{\"no-body\":\"\",\"img-right\":_vm.isList}},[(_vm.showThumbnail && _vm.thumbnail && _vm.thumbnailVisible)?_c('b-card-img',{staticClass:\"thumbnail\",attrs:{\"src\":_vm.thumbnail.href,\"alt\":_vm.thumbnail.title,\"crossorigin\":_vm.crossOriginMedia,\"right\":_vm.isList}}):_vm._e(),_c('b-card-body',[_c('b-card-title',[_c('StacLink',{staticClass:\"stretched-link\",attrs:{\"data\":[_vm.data, _vm.catalog]}})],1),(_vm.data && _vm.data.description)?_c('b-card-text',{staticClass:\"intro\"},[_vm._v(\" \"+_vm._s(_vm._f(\"stripCommonmark\")(_vm.data.description))+\" \")]):_vm._e(),(_vm.temporalExtent)?_c('b-card-text',{staticClass:\"datetime\"},[_vm._v(_vm._s(_vm._f(\"shortTemporalExtent\")(_vm.temporalExtent)))]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-card no-body class=\"catalog-card\" :class=\"{queued: !this.data}\" v-b-visible.200=\"load\" :img-right=\"isList\">\n    <b-card-img v-if=\"showThumbnail && thumbnail && thumbnailVisible\" class=\"thumbnail\" :src=\"thumbnail.href\" :alt=\"thumbnail.title\" :crossorigin=\"crossOriginMedia\" :right=\"isList\"></b-card-img>\n    <b-card-body>\n      <b-card-title>\n        <StacLink :data=\"[data, catalog]\" class=\"stretched-link\" />\n      </b-card-title>\n      <b-card-text v-if=\"data && data.description\" class=\"intro\">\n        {{ data.description | stripCommonmark }}\n      </b-card-text>\n      <b-card-text v-if=\"temporalExtent\" class=\"datetime\">{{ temporalExtent | shortTemporalExtent }}</b-card-text>\n    </b-card-body>\n  </b-card>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport StacLink from './StacLink.vue';\nimport STAC from '../stac';\nimport removeMd from 'remove-markdown';\nimport { Formatters } from '@radiantearth/stac-fields';\n\nexport default {\n  name: 'Catalog',\n  components: {\n    StacLink\n  },\n  props: {\n    catalog: {\n      type: Object,\n      required: true\n    },\n    showThumbnail: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      thumbnailVisible: false // Lazy load thumbnails and not all at once for API Collections\n    }\n  },\n  filters: {\n    stripCommonmark(text) {\n      // Best-effort approach to remove some CommonMark (Markdown).\n      // Likely not perfect, but seems good enough for most cases.\n      return removeMd(text);\n    },\n    shortTemporalExtent(value) {\n      return Formatters.formatTemporalExtent(value, true);\n    }\n  },\n  computed: {\n    ...mapState(['crossOriginMedia', 'cardViewMode']),\n    ...mapGetters(['getStac']),\n    isList() {\n      return this.cardViewMode === 'list';\n    },\n    data() {\n      if (this.catalog instanceof STAC) {\n        return this.catalog;\n      }\n      else {\n        return this.getStac(this.catalog.href);\n      }\n    },\n    thumbnail() {\n      if (this.data) {\n        let thumbnails = this.data.getThumbnails(true, 'thumbnail');\n        if (thumbnails.length > 0) {\n          return thumbnails[0];\n        }\n      }\n      return null;\n    },\n    temporalExtent() {\n      if (this.data?.isCollection() && this.data.extent?.temporal?.interval.length > 0) {\n        let extent = this.data.extent.temporal.interval[0];\n        if (extent[0] || extent[1]) {\n          return this.data.extent.temporal.interval[0];\n        }\n      }\n      return null;\n    }\n  },\n  methods: {\n    load(visible) {\n      if (visible) {\n        this.thumbnailVisible = true;\n      }\n      if (this.catalog instanceof STAC) {\n        return;\n      }\n      this.$store.commit(visible ? 'queue' : 'unqueue', this.catalog.href);\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../theme/variables.scss';\n\n#stac-browser {\n  .catalog-card {\n    .intro {\n      display: -webkit-box;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      text-align: left;\n    }\n  }\n  .card-list {\n    flex-direction: row;\n    .catalog-card {\n      box-sizing: border-box;\n      margin-top: 0.5em;\n      margin-bottom: 0.5em;\n\n      .card-img-right {\n        min-height: 100px;\n        height: 100%;\n        max-height: 8.5rem;\n        max-width: 33%;\n      }\n\n      .intro {\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        text-align: left;\n        margin-bottom: 0;\n      }\n      .datetime {\n        display: inline-block;\n        padding: $border-radius;\n        border: 0;\n        background-color: rgba(0,0,0,0.6);\n        color: map-get($theme-colors, \"light\");\n        border-radius: 0 0 0 $border-radius;\n        position: absolute;\n        top: 0;\n        right: 0;\n        font-size: 80%;\n      }\n    }\n  }\n  .card-columns {\n    .catalog-card {\n      box-sizing: border-box;\n      margin-top: 0.5em;\n      margin-bottom: 0.5em;\n      text-align: center;\n\n      &.queued {\n        min-height: 10rem;\n      }\n\n      .card-img {\n        width: auto;\n        height: auto;\n        max-width: 100%;\n        max-height: 300px;\n      }\n      .card-body, .card-title {\n        text-align: center;\n      }\n      .datetime {\n        color: map-get($theme-colors, \"secondary\");\n        font-size: 85%;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Catalog.vue?vue&type=template&id=7cca5358&\"\nimport script from \"./Catalog.vue?vue&type=script&lang=js&\"\nexport * from \"./Catalog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Catalog.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=style&index=0&lang=scss&\"","module.exports = function(md, options) {\n  options = options || {};\n  options.listUnicodeChar = options.hasOwnProperty('listUnicodeChar') ? options.listUnicodeChar : false;\n  options.stripListLeaders = options.hasOwnProperty('stripListLeaders') ? options.stripListLeaders : true;\n  options.gfm = options.hasOwnProperty('gfm') ? options.gfm : true;\n  options.useImgAltText = options.hasOwnProperty('useImgAltText') ? options.useImgAltText : true;\n\n  var output = md || '';\n\n  // Remove horizontal rules (stripListHeaders conflict with this rule, which is why it has been moved to the top)\n  output = output.replace(/^(-\\s*?|\\*\\s*?|_\\s*?){3,}\\s*$/gm, '');\n\n  try {\n    if (options.stripListLeaders) {\n      if (options.listUnicodeChar)\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, options.listUnicodeChar + ' $1');\n      else\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, '$1');\n    }\n    if (options.gfm) {\n      output = output\n        // Header\n        .replace(/\\n={2,}/g, '\\n')\n        // Fenced codeblocks\n        .replace(/~{3}.*\\n/g, '')\n        // Strikethrough\n        .replace(/~~/g, '')\n        // Fenced codeblocks\n        .replace(/`{3}.*\\n/g, '');\n    }\n    output = output\n      // Remove HTML tags\n      .replace(/<[^>]*>/g, '')\n      // Remove setext-style headers\n      .replace(/^[=\\-]{2,}\\s*$/g, '')\n      // Remove footnotes?\n      .replace(/\\[\\^.+?\\](\\: .*?$)?/g, '')\n      .replace(/\\s{0,2}\\[.*?\\]: .*?$/g, '')\n      // Remove images\n      .replace(/\\!\\[(.*?)\\][\\[\\(].*?[\\]\\)]/g, options.useImgAltText ? '$1' : '')\n      // Remove inline links\n      .replace(/\\[(.*?)\\][\\[\\(].*?[\\]\\)]/g, '$1')\n      // Remove blockquotes\n      .replace(/^\\s{0,3}>\\s?/g, '')\n      // Remove reference-style links?\n      .replace(/^\\s{1,2}\\[(.*?)\\]: (\\S+)( \".*?\")?\\s*$/g, '')\n      // Remove atx-style headers\n      .replace(/^(\\n)?\\s{0,}#{1,6}\\s+| {0,}(\\n)?\\s{0,}#{0,} {0,}(\\n)?\\s{0,}$/gm, '$1$2$3')\n      // Remove emphasis (repeat the line to remove double emphasis)\n      .replace(/([\\*_]{1,3})(\\S.*?\\S{0,1})\\1/g, '$2')\n      .replace(/([\\*_]{1,3})(\\S.*?\\S{0,1})\\1/g, '$2')\n      // Remove code blocks\n      .replace(/(`{3,})(.*?)\\1/gm, '$2')\n      // Remove inline code\n      .replace(/`(.+?)`/g, '$1')\n      // Replace two or more newlines with exactly two? Not entirely sure this belongs here...\n      .replace(/\\n{2,}/g, '\\n\\n');\n  } catch(e) {\n    console.error(e);\n    return md;\n  }\n  return output;\n};\n"],"sourceRoot":""}