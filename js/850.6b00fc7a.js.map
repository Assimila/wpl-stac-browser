{"version":3,"file":"js/850.6b00fc7a.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./src/components/Catalog.vue","webpack://@radiantearth/stac-browser/src/components/Catalog.vue","webpack://@radiantearth/stac-browser/./src/components/Catalog.vue?bc73","webpack://@radiantearth/stac-browser/./src/components/Catalog.vue?462e","webpack://@radiantearth/stac-browser/./src/components/ThumbnailCardMixin.js","webpack://@radiantearth/stac-browser/./node_modules/remove-markdown/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-card',{directives:[{name:\"b-visible\",rawName:\"v-b-visible.400\",value:(_vm.load),expression:\"load\",modifiers:{\"400\":true}}],class:_vm.classes,attrs:{\"no-body\":\"\",\"img-right\":_vm.isList}},[(_vm.hasImage)?_c('b-card-img-lazy',_vm._b({staticClass:\"thumbnail\",attrs:{\"offset\":\"200\"}},'b-card-img-lazy',_vm.thumbnail,false)):_vm._e(),_c('b-card-body',[_c('b-card-title',[_c('StacLink',{staticClass:\"stretched-link\",attrs:{\"data\":[_vm.data, _vm.catalog]}})],1),(_vm.data && (_vm.data.description || _vm.data.deprecated))?_c('b-card-text',{staticClass:\"intro\"},[(_vm.data.deprecated)?_c('b-badge',{staticClass:\"deprecated\",attrs:{\"variant\":\"warning\"}},[_vm._v(\"Deprecated\")]):_vm._e(),_vm._v(\" \"+_vm._s(_vm._f(\"stripCommonmark\")(_vm.data.description))+\" \")],1):_vm._e(),(_vm.temporalExtent)?_c('b-card-text',{staticClass:\"datetime\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.temporalExtent)}})]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-card no-body :class=\"classes\" v-b-visible.400=\"load\" :img-right=\"isList\">\n    <b-card-img-lazy v-if=\"hasImage\" class=\"thumbnail\" offset=\"200\" v-bind=\"thumbnail\" />\n    <b-card-body>\n      <b-card-title>\n        <StacLink :data=\"[data, catalog]\" class=\"stretched-link\" />\n      </b-card-title>\n      <b-card-text v-if=\"data && (data.description || data.deprecated)\" class=\"intro\">\n        <b-badge v-if=\"data.deprecated\" variant=\"warning\" class=\"deprecated\">Deprecated</b-badge>\n        {{ data.description | stripCommonmark }}\n      </b-card-text>\n      <b-card-text v-if=\"temporalExtent\" class=\"datetime\"><span v-html=\"temporalExtent\" /></b-card-text>\n    </b-card-body>\n  </b-card>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport ThumbnailCardMixin from './ThumbnailCardMixin';\nimport StacLink from './StacLink.vue';\nimport STAC from '../models/stac';\nimport removeMd from 'remove-markdown';\nimport { formatTemporalExtent } from '@radiantearth/stac-fields/formatters';\n\nexport default {\n  name: 'Catalog',\n  components: {\n    StacLink\n  },\n  filters: {\n    stripCommonmark(text) {\n      // Best-effort approach to remove some CommonMark (Markdown).\n      // Likely not perfect, but seems good enough for most cases.\n      return removeMd(text);\n    }\n  },\n  mixins: [\n    ThumbnailCardMixin\n  ],\n  props: {\n    catalog: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    ...mapGetters(['getStac']),\n    classes() {\n      let classes = ['catalog-card'];\n      if (!this.data) {\n        classes.push('queued');\n      }\n      if (this.data && this.data.deprecated) {\n        classes.push('deprecated');\n      }\n      if (this.hasImage) {\n        classes.push('has-thumbnail');\n      }\n      if (this.temporalExtent) {\n        classes.push('has-extent');\n      }\n      return classes;\n    },\n    data() {\n      return this.getStac(this.catalog);\n    },\n    temporalExtent() {\n      if (this.data?.isCollection() && this.data.extent?.temporal?.interval.length > 0) {\n        let extent = this.data.extent.temporal.interval[0];\n        if (Array.isArray(extent) && (typeof extent[0] === 'string' || typeof extent[1] === 'string')) {\n          return formatTemporalExtent(this.data.extent.temporal.interval[0], true);\n        }\n      }\n      return null;\n    }\n  },\n  methods: {\n    load(visible) {\n      if (this.catalog instanceof STAC) {\n        return;\n      }\n      this.$store.commit(visible ? 'queue' : 'unqueue', this.catalog.href);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import '../theme/variables.scss';\n\n#stac-browser {\n  .catalog-card {\n\n    &.deprecated {\n      opacity: 0.5;\n\n      &:hover {\n        opacity: 1;\n      }\n    }\n\n    .intro {\n      display: -webkit-box;\n      -webkit-line-clamp: 3;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      text-align: left;\n    }\n      \n    .badge.deprecated {\n      text-transform: uppercase;\n    }\n  }\n  .card-list {\n    flex-direction: row;\n\n    .catalog-card {\n      box-sizing: border-box;\n      margin-top: 0.5em;\n      margin-bottom: 0.5em;\n\n      &.has-extent:not(.has-thumbnail) {\n        padding-top: 0.75em;\n      }\n\n      .card-img-right {\n        min-height: 100px;\n        height: 100%;\n        max-height: 8.5rem;\n        max-width: 33%;\n      }\n\n      .intro {\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        text-align: left;\n        margin-bottom: 0;\n      }\n      .datetime {\n        display: inline-block;\n        padding: $border-radius;\n        border: 0;\n        background-color: rgba(0,0,0,0.6);\n        color: map-get($theme-colors, \"light\");\n        border-radius: 0 0 0 $border-radius;\n        position: absolute;\n        top: 0;\n        right: 0;\n        font-size: 80%;\n      }\n    }\n  }\n  .card-columns {\n    .catalog-card {\n      box-sizing: border-box;\n      margin-top: 0.5em;\n      margin-bottom: 0.5em;\n      text-align: center;\n\n      &.queued {\n        min-height: 10rem;\n      }\n\n      .card-img {\n        width: auto;\n        height: auto;\n        max-width: 100%;\n        max-height: 300px;\n      }\n      .card-title {\n        text-align: center;\n      }\n      .datetime {\n        color: map-get($theme-colors, \"secondary\");\n        font-size: 85%;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Catalog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Catalog.vue?vue&type=template&id=45033c28&\"\nimport script from \"./Catalog.vue?vue&type=script&lang=js&\"\nexport * from \"./Catalog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Catalog.vue?vue&type=style&index=0&id=45033c28&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { mapState } from 'vuex';\n\nexport default {\n  props: {\n    showThumbnail: {\n      type: Boolean,\n      default: true\n    }\n  },\n  computed: {\n    ...mapState(['cardViewMode', 'crossOriginMedia', 'defaultThumbnailSize']),\n    isList() {\n      return this.data && !this.data.isItem() && this.cardViewMode === 'list';\n    },\n    hasImage() {\n      return this.showThumbnail && this.thumbnail;\n    },\n    thumbnail() {\n      if (this.data) {\n        let thumbnails = this.data.getThumbnails(true, 'thumbnail');\n        if (thumbnails.length > 0) {\n          let t = thumbnails[0];\n          let width, height = [];\n          if (Array.isArray(t['proj:shape']) && t['proj:shape'].length === 2) {\n            [height, width] = t['proj:shape'];\n          }\n          else if (Array.isArray(this.defaultThumbnailSize) && this.defaultThumbnailSize.length === 2) {\n            [height, width] = this.defaultThumbnailSize;\n          }\n          return {\n            src: t.href,\n            alt: t.title,\n            crossorigin: this.crossOriginMedia,\n            right: this.isList,\n            blankColor: \"rgba(0, 0, 0, 0.125)\",\n            width,\n            height\n          };\n        }\n      }\n      return null;\n    }\n  }\n};","module.exports = function(md, options) {\n  options = options || {};\n  options.listUnicodeChar = options.hasOwnProperty('listUnicodeChar') ? options.listUnicodeChar : false;\n  options.stripListLeaders = options.hasOwnProperty('stripListLeaders') ? options.stripListLeaders : true;\n  options.gfm = options.hasOwnProperty('gfm') ? options.gfm : true;\n  options.useImgAltText = options.hasOwnProperty('useImgAltText') ? options.useImgAltText : true;\n  options.abbr = options.hasOwnProperty('abbr') ? options.abbr : false;\n  options.replaceLinksWithURL = options.hasOwnProperty('replaceLinksWithURL') ? options.replaceLinksWithURL : false;\n  options.htmlTagsToSkip = options.hasOwnProperty('htmlTagsToSkip') ? options.htmlTagsToSkip : [];\n\n  var output = md || '';\n\n  // Remove horizontal rules (stripListHeaders conflict with this rule, which is why it has been moved to the top)\n  output = output.replace(/^(-\\s*?|\\*\\s*?|_\\s*?){3,}\\s*/gm, '');\n\n  try {\n    if (options.stripListLeaders) {\n      if (options.listUnicodeChar)\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, options.listUnicodeChar + ' $1');\n      else\n        output = output.replace(/^([\\s\\t]*)([\\*\\-\\+]|\\d+\\.)\\s+/gm, '$1');\n    }\n    if (options.gfm) {\n      output = output\n      // Header\n        .replace(/\\n={2,}/g, '\\n')\n        // Fenced codeblocks\n        .replace(/~{3}.*\\n/g, '')\n        // Strikethrough\n        .replace(/~~/g, '')\n        // Fenced codeblocks\n        .replace(/`{3}.*\\n/g, '');\n    }\n    if (options.abbr) {\n      // Remove abbreviations\n      output = output.replace(/\\*\\[.*\\]:.*\\n/, '');\n    }\n    output = output\n    // Remove HTML tags\n      .replace(/<[^>]*>/g, '')\n\n    var htmlReplaceRegex = new RegExp('<[^>]*>', 'g');\n    if (options.htmlTagsToSkip.length > 0) {\n      // Using negative lookahead. Eg. (?!sup|sub) will not match 'sup' and 'sub' tags.\n      var joinedHtmlTagsToSkip = '(?!' + options.htmlTagsToSkip.join(\"|\") + ')';\n\n      // Adding the lookahead literal with the default regex for html. Eg./<(?!sup|sub)[^>]*>/ig\n      htmlReplaceRegex = new RegExp(\n          '<' +\n          joinedHtmlTagsToSkip +\n          '[^>]*>', \n          'ig'\n      );\n    }\n\n    output = output\n      // Remove HTML tags\n      .replace(htmlReplaceRegex, '')\n      // Remove setext-style headers\n      .replace(/^[=\\-]{2,}\\s*$/g, '')\n      // Remove footnotes?\n      .replace(/\\[\\^.+?\\](\\: .*?$)?/g, '')\n      .replace(/\\s{0,2}\\[.*?\\]: .*?$/g, '')\n      // Remove images\n      .replace(/\\!\\[(.*?)\\][\\[\\(].*?[\\]\\)]/g, options.useImgAltText ? '$1' : '')\n      // Remove inline links\n      .replace(/\\[([^\\]]*?)\\][\\[\\(].*?[\\]\\)]/g, options.replaceLinksWithURL ? '$2' : '$1')\n      // Remove blockquotes\n      .replace(/^\\s{0,3}>\\s?/gm, '')\n      // .replace(/(^|\\n)\\s{0,3}>\\s?/g, '\\n\\n')\n      // Remove reference-style links?\n      .replace(/^\\s{1,2}\\[(.*?)\\]: (\\S+)( \".*?\")?\\s*$/g, '')\n      // Remove atx-style headers\n      .replace(/^(\\n)?\\s{0,}#{1,6}\\s+| {0,}(\\n)?\\s{0,}#{0,} #{0,}(\\n)?\\s{0,}$/gm, '$1$2$3')\n      // Remove * emphasis\n      .replace(/([\\*]+)(\\S)(.*?\\S)??\\1/g, '$2$3')\n      // Remove _ emphasis. Unlike *, _ emphasis gets rendered only if \n      //   1. Either there is a whitespace character before opening _ and after closing _.\n      //   2. Or _ is at the start/end of the string.\n      .replace(/(^|\\W)([_]+)(\\S)(.*?\\S)??\\2($|\\W)/g, '$1$3$4$5')\n      // Remove code blocks\n      .replace(/(`{3,})(.*?)\\1/gm, '$2')\n      // Remove inline code\n      .replace(/`(.+?)`/g, '$1')\n      // // Replace two or more newlines with exactly two? Not entirely sure this belongs here...\n      // .replace(/\\n{2,}/g, '\\n\\n')\n      // // Remove newlines in a paragraph\n      // .replace(/(\\S+)\\n\\s*(\\S+)/g, '$1 $2')\n      // Replace strike through\n      .replace(/~(.*?)~/g, '$1');\n  } catch(e) {\n    console.error(e);\n    return md;\n  }\n  return output;\n};\n"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","load","expression","modifiers","class","classes","attrs","isList","hasImage","_b","staticClass","thumbnail","_e","data","catalog","description","deprecated","_v","_s","_f","temporalExtent","domProps","staticRenderFns","components","StacLink","filters","stripCommonmark","mixins","ThumbnailCardMixin","props","type","required","computed","methods","component","showThumbnail","Boolean","default","mapState","isItem","cardViewMode","thumbnails","getThumbnails","length","width","t","height","Array","isArray","defaultThumbnailSize","src","href","alt","title","crossorigin","crossOriginMedia","right","blankColor","module","exports","md","options","listUnicodeChar","hasOwnProperty","stripListLeaders","gfm","useImgAltText","abbr","replaceLinksWithURL","htmlTagsToSkip","output","replace","htmlReplaceRegex","RegExp","joinedHtmlTagsToSkip","join","e","console","error"],"sourceRoot":""}